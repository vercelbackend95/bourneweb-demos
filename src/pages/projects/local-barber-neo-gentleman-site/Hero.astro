---


const {
  kicker = "NEO GENTLEMAN · PREMIUM BARBERSHOP",
  punchline = "Precision, not speed.",
  titleLine1 = "Sharp fades.",
  titleLine2 = "Calm ritual.",
  lead = "Crafted cuts, clean lines — hot towel finish included. Pick a service and we’ll line up the best slot.",

  // ✅ UK format everywhere
  openHours = "10am–8pm",
  opensAt = "10am",
  openFrom = 10,
  openTo = 20,

  proof1 = "3000+ cuts",

  photoUrl = "https://images.unsplash.com/photo-1599351431618-3174d19c93a5?auto=format&fit=crop&w=2400&q=80",
  textureUrl = "https://images.unsplash.com/photo-1585747860715-2ba37e788b70?auto=format&fit=crop&w=2400&q=80",
} = Astro.props;
---

<main class="bm-hero" aria-label="Barber hero" data-bm-hero>
  <div class="bm-hero__grid">
    <!-- LEFT -->
    <section class="bm-hero__copy">
      <p class="bm-kicker">{kicker}</p>
      <p class="bm-punchline">{punchline}</p>

      <!-- ✅ Open / Closed pill (UK) -->
      <div
        class="bm-openNow"
        aria-label="Opening status"
        data-bm-openpill
        data-open-hours={openHours}
        data-opens-at={opensAt}
        data-open-from={String(openFrom)}
        data-open-to={String(openTo)}
      >
        <span class="bm-openDot" aria-hidden="true"></span>
        <span class="bm-openTxt" data-bm-openTxt>Open ·</span>
        <strong class="bm-openHrs" data-bm-openHrs>{openHours}</strong>
      </div>

      <h1 class="bm-title">
        {titleLine1}<br />
        {titleLine2}
      </h1>

      <p class="bm-lead">{lead}</p>

      <div class="bm-actions">
        <a class="bm-cta" href="#book">
          Book now
          <span class="bm-cta__shine" aria-hidden="true"></span>
        </a>

        <a class="bm-linkPlain" href="#services">
          View services <span class="bm-linkPlain__arrow" aria-hidden="true">↗</span>
        </a>
      </div>

      <div class="bm-rating" aria-label="Google rating & proof">
        <span class="bm-rating__stars" aria-hidden="true">★★★★★</span>
        <span class="bm-rating__val"><strong>4.9</strong> (300+ reviews)</span>

        <span class="bm-rating__sep" aria-hidden="true">·</span>

        <span class="bm-proofLine">
          <span class="bm-proofItem">
            <span class="bm-proofIco" aria-hidden="true">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                <path d="M8 7h8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                <path d="M7 10h10" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                <path d="M6 13h12" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                <path d="M8 17h8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            </span>
            {proof1}
          </span>

          <span class="bm-proofDot" aria-hidden="true">·</span>

          <span class="bm-proofItem">
            <span class="bm-proofIco" aria-hidden="true">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                <path d="M6 7h12v10H6V7Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                <path d="M8 10h8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                <path d="M9 14h6" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
              </svg>
            </span>
            Pay at shop
          </span>
        </span>
      </div>
    </section>

    <!-- RIGHT: stage only -->
    <aside class="bm-hero__right" aria-label="Hero stage">
      <div
        class="bm-hero__media"
        aria-hidden="true"
        style={`--bm-hero-photo: url("${photoUrl}"); --bm-hero-texture: url("${textureUrl}")`}
      ></div>
    </aside>
  </div>

  <script is:inline>
    (function () {
      const root = document.querySelector("[data-bm-hero]");
      if (!root) return;

      // ===== Open / Closed pill (UK) =====
      const pill = root.querySelector("[data-bm-openpill]");
      const txt = root.querySelector("[data-bm-openTxt]");
      const hrs = root.querySelector("[data-bm-openHrs]");

      function parseNum(v, fallback){
        const n = Number(v);
        return Number.isFinite(n) ? n : fallback;
      }

      function isOpenNow(d, fromH, toH){
        const mins = d.getHours() * 60 + d.getMinutes();
        return mins >= fromH * 60 && mins < toH * 60;
      }

      function renderOpen(){
        if (!pill || !txt || !hrs) return;

        const fromH = parseNum(pill.dataset.openFrom, 10);
        const toH = parseNum(pill.dataset.openTo, 20);
        const hoursText = pill.dataset.openHours || "10am–8pm";
        const opensAt = pill.dataset.opensAt || "10am";

        const open = isOpenNow(new Date(), fromH, toH);

        if (open){
          pill.classList.remove("is-closed");
          txt.textContent = "Open ·";
          hrs.textContent = hoursText;
        } else {
          pill.classList.add("is-closed");
          txt.textContent = `Closed · opens ${opensAt}`;
          hrs.textContent = "";
        }
      }

      renderOpen();
      setInterval(renderOpen, 30 * 1000);

      // ===== entrance animation =====
      const reduce =
        window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      if (!reduce) {
        try {
          const io = new IntersectionObserver(
            (entries) => entries.forEach((e) => e.isIntersecting && root.classList.add("is-in")),
            { threshold: 0.25 }
          );
          io.observe(root);
        } catch {
          root.classList.add("is-in");
        }
      } else {
        root.classList.add("is-in");
      }
    })();
  </script>
</main>
